(this["webpackJsonpreact-blog"]=this["webpackJsonpreact-blog"]||[]).push([[0],{28:function(e,t,s){},30:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},50:function(e,t,s){},51:function(e,t,s){},52:function(e,t,s){},53:function(e,t,s){},54:function(e,t,s){"use strict";s.r(t);var a=s(2),c=s.n(a),n=s(22),i=s.n(n),r=(s(28),s(0));function l(){return Object(r.jsxs)("div",{className:"header",children:[Object(r.jsxs)("div",{className:"headerTitles",children:[Object(r.jsx)("span",{className:"headerTitleSm",children:"React & Node"}),Object(r.jsx)("span",{className:"headerTitleLg",children:"Blog"})]}),Object(r.jsx)("img",{className:"headerImg",src:"https://images.pexels.com/photos/1167355/pexels-photo-1167355.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",alt:""})]})}s(30);var o=s(5);function j({post:e}){return Object(r.jsxs)("div",{className:"post",children:[e.photo&&Object(r.jsx)("img",{className:"postImg",src:"http://localhost:5000/images/"+e.photo,alt:""}),Object(r.jsxs)("div",{className:"postInfo",children:[Object(r.jsx)("div",{className:"postCats",children:e.categories.map((e=>Object(r.jsx)("span",{className:"postCat",children:e.name})))}),Object(r.jsx)(o.b,{to:`/post/${e._id}`,className:"link",children:Object(r.jsx)("span",{className:"postTitle",children:e.title})}),Object(r.jsx)("hr",{}),Object(r.jsx)("span",{className:"postDate",children:new Date(e.createdAt).toDateString()})]}),Object(r.jsx)("p",{className:"postDesc",children:e.desc})]})}s(38);function b({posts:e}){return Object(r.jsx)("div",{className:"posts",children:e.map(((e,t)=>Object(r.jsx)(j,{post:e},t)))})}var d=s(55);s(39);function u(){const[e,t]=Object(a.useState)([]);return Object(a.useEffect)((()=>{(async()=>{try{const e=await d.a.get("/categories");t(e.data)}catch(e){console.error("Failed to fetch categories:",e)}})()}),[]),Object(r.jsxs)("div",{className:"sidebar",children:[Object(r.jsxs)("div",{className:"sidebarItem",children:[Object(r.jsx)("span",{className:"sidebarTitle",children:"ABOUT ME"}),Object(r.jsx)("img",{src:"https://i.pinimg.com/236x/1e/3f/58/1e3f587572a7a7b20bbf1828595a1786--holiday-party-themes-holiday-gift-guide.jpg",alt:""}),Object(r.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptate qui necessitatibus nostrum illum reprehenderit."})]}),Object(r.jsxs)("div",{className:"sidebarItem",children:[Object(r.jsx)("span",{className:"sidebarTitle",children:"CATEGORIES"}),Object(r.jsx)("ul",{className:"sidebarList",children:e.map((e=>Object(r.jsx)(o.b,{to:`/?cat=${e.name}`,className:"link",children:Object(r.jsx)("li",{className:"sidebarListItem",children:e.name})},e._id)))})]}),Object(r.jsxs)("div",{className:"sidebarItem",children:[Object(r.jsx)("span",{className:"sidebarTitle",children:"FOLLOW US"}),Object(r.jsxs)("div",{className:"sidebarSocial",children:[Object(r.jsx)("i",{className:"sidebarIcon fab fa-facebook-square"}),Object(r.jsx)("i",{className:"sidebarIcon fab fa-twitter-square"}),Object(r.jsx)("i",{className:"sidebarIcon fab fa-pinterest-square"}),Object(r.jsx)("i",{className:"sidebarIcon fab fa-instagram-square"})]})]})]})}s(46);var p=s(4);function O(){const[e,t]=Object(a.useState)([]),{search:s}=Object(p.f)();return Object(a.useEffect)((()=>{(async()=>{try{const e=await d.a.get("/posts"+s);t(e.data)}catch(e){console.error("Failed to fetch posts:",e)}})()}),[s]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(l,{}),Object(r.jsxs)("div",{className:"home",children:[Object(r.jsx)(b,{posts:e}),Object(r.jsx)(u,{})]})]})}var m=(e,t)=>{switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":case"UPDATE_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"UPDATE_START":return{...e,isFetching:!0};case"UPDATE_FAILURE":return{user:e.user,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};default:return e}};const h={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},x=Object(a.createContext)(h),g=({children:e})=>{const[t,s]=Object(a.useReducer)(m,h);return Object(a.useEffect)((()=>{localStorage.setItem("user",JSON.stringify(t.user))}),[t.user]),Object(r.jsx)(x.Provider,{value:{user:t.user,isFetching:t.isFetching,error:t.error,dispatch:s},children:e})};s(47);function N(){const{user:e,dispatch:t}=Object(a.useContext)(x);return Object(r.jsxs)("div",{className:"top",children:[Object(r.jsxs)("div",{className:"topLeft",children:[Object(r.jsx)("i",{className:"topIcon fab fa-facebook-square"}),Object(r.jsx)("i",{className:"topIcon fab fa-twitter-square"}),Object(r.jsx)("i",{className:"topIcon fab fa-pinterest-square"}),Object(r.jsx)("i",{className:"topIcon fab fa-instagram-square"})]}),Object(r.jsx)("div",{className:"topCenter",children:Object(r.jsxs)("ul",{className:"topList",children:[Object(r.jsx)("li",{className:"topListItem",children:Object(r.jsx)(o.b,{className:"link",to:"/",children:"HOME"})}),Object(r.jsx)("li",{className:"topListItem",children:Object(r.jsx)(o.b,{className:"link",to:"/",children:"ABOUT"})}),Object(r.jsx)("li",{className:"topListItem",children:Object(r.jsx)(o.b,{className:"link",to:"/",children:"CONTACT"})}),Object(r.jsx)("li",{className:"topListItem",children:Object(r.jsx)(o.b,{className:"link",to:"/write",children:"WRITE"})}),Object(r.jsx)("li",{className:"topListItem",onClick:()=>{t({type:"LOGOUT"})},children:e&&"LOGOUT"})]})}),Object(r.jsxs)("div",{className:"topRight",children:[e?Object(r.jsx)(o.b,{to:"/settings",children:Object(r.jsx)("img",{className:"topImg",src:"http://localhost:5000/images/"+e.profilePic,alt:""})}):Object(r.jsxs)("ul",{className:"topList",children:[Object(r.jsx)("li",{className:"topListItem",children:Object(r.jsx)(o.b,{className:"link",to:"/login",children:"LOGIN"})}),Object(r.jsx)("li",{className:"topListItem",children:Object(r.jsx)(o.b,{className:"link",to:"/register",children:"REGISTER"})})]}),Object(r.jsx)("i",{className:"topSearchIcon fas fa-search"})]})]})}s(48),s(49);function f(){const e=Object(p.f)().pathname.split("/")[2],[t,s]=Object(a.useState)(null),{user:c}=Object(a.useContext)(x),[n,i]=Object(a.useState)(""),[l,j]=Object(a.useState)(""),[b,u]=Object(a.useState)(!1);Object(a.useEffect)((()=>{(async()=>{try{const t=await d.a.get("/posts/"+e);s(t.data),i(t.data.title),j(t.data.desc)}catch(t){console.error("Error fetching post:",t)}})()}),[e]);return t?Object(r.jsx)("div",{className:"singlePost",children:Object(r.jsxs)("div",{className:"singlePostWrapper",children:[t.photo&&Object(r.jsx)("img",{src:"http://localhost:5000/images/"+t.photo,alt:"",className:"singlePostImg"}),b?Object(r.jsx)("input",{type:"text",value:n,className:"singlePostTitleInput",autoFocus:!0,onChange:e=>i(e.target.value)}):Object(r.jsxs)("h1",{className:"singlePostTitle",children:[n,t.username===(null===c||void 0===c?void 0:c.username)&&Object(r.jsxs)("div",{className:"singlePostEdit",children:[Object(r.jsx)("i",{className:"singlePostIcon far fa-edit",onClick:()=>u(!0)}),Object(r.jsx)("i",{className:"singlePostIcon far fa-trash-alt",onClick:async()=>{try{await d.a.delete(`/posts/${t._id}`,{data:{username:c.username}}),window.location.replace("/")}catch(e){console.error("Error deleting post:",e)}}})]})]}),Object(r.jsxs)("div",{className:"singlePostInfo",children:[Object(r.jsxs)("span",{className:"singlePostAuthor",children:["Author:",Object(r.jsx)(o.b,{to:`/?user=${t.username}`,className:"link",children:Object(r.jsxs)("b",{children:[" ",t.username]})})]}),Object(r.jsx)("span",{className:"singlePostDate",children:new Date(t.createdAt).toDateString()})]}),b?Object(r.jsx)("textarea",{className:"singlePostDescInput",value:l,onChange:e=>j(e.target.value)}):Object(r.jsx)("p",{className:"singlePostDesc",children:l}),b&&Object(r.jsx)("button",{className:"singlePostButton",onClick:async()=>{try{await d.a.put(`/posts/${t._id}`,{username:c.username,title:n,desc:l}),u(!1)}catch(e){console.error("Error updating post:",e)}},children:"Update"})]})}):Object(r.jsx)("div",{children:"Loading..."})}function y(){return Object(r.jsxs)("div",{className:"single",children:[Object(r.jsx)(f,{}),Object(r.jsx)(u,{})]})}s(50);function I(){const[e,t]=Object(a.useState)(""),[s,c]=Object(a.useState)(""),[n,i]=Object(a.useState)(null),{user:l}=Object(a.useContext)(x);return Object(r.jsxs)("div",{className:"write",children:[n&&Object(r.jsx)("img",{className:"writeImg",src:URL.createObjectURL(n),alt:""}),Object(r.jsxs)("form",{className:"writeForm",onSubmit:async t=>{t.preventDefault();const a={username:l.username,title:e,desc:s};if(n){const e=new FormData,t=Date.now()+n.name;e.append("name",t),e.append("file",n),a.photo=t;try{await d.a.post("/upload",e)}catch(c){}}try{const e=await d.a.post("/posts",a);window.location.replace("/post/"+e.data._id)}catch(c){}},children:[Object(r.jsxs)("div",{className:"writeFormGroup",children:[Object(r.jsx)("label",{htmlFor:"fileInput",children:Object(r.jsx)("i",{className:"writeIcon fas fa-plus"})}),Object(r.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:e=>i(e.target.files[0])}),Object(r.jsx)("input",{type:"text",placeholder:"Title",className:"writeInput",autoFocus:!0,onChange:e=>t(e.target.value)})]}),Object(r.jsx)("div",{className:"writeFormGroup",children:Object(r.jsx)("textarea",{placeholder:"Tell your story...",type:"text",className:"writeInput writeText",onChange:e=>c(e.target.value)})}),Object(r.jsx)("button",{className:"writeSubmit",type:"submit",children:"Publish"})]})]})}s(51);function v(){const[e,t]=Object(a.useState)(null),[s,c]=Object(a.useState)(""),[n,i]=Object(a.useState)(""),[l,o]=Object(a.useState)(""),[j,b]=Object(a.useState)(!1),{user:p,dispatch:O}=Object(a.useContext)(x);return Object(r.jsxs)("div",{className:"settings",children:[Object(r.jsxs)("div",{className:"settingsWrapper",children:[Object(r.jsxs)("div",{className:"settingsTitle",children:[Object(r.jsx)("span",{className:"settingsUpdateTitle",children:"Update Your Account"}),Object(r.jsx)("span",{className:"settingsDeleteTitle",children:"Delete Account"})]}),Object(r.jsxs)("form",{className:"settingsForm",onSubmit:async t=>{t.preventDefault(),O({type:"UPDATE_START"});const a={userId:p._id,username:s,email:n,password:l};if(e){const t=new FormData,s=Date.now()+e.name;t.append("name",s),t.append("file",e),a.profilePic=s;try{await d.a.post("/api/upload",t)}catch(c){console.error("Error uploading file:",c)}}try{const e=await d.a.put("/api/users/"+p._id,a);b(!0),O({type:"UPDATE_SUCCESS",payload:e.data})}catch(c){console.error("Error updating user:",c),O({type:"UPDATE_FAILURE"})}},children:[Object(r.jsx)("label",{children:"Profile Picture"}),Object(r.jsxs)("div",{className:"settingsPP",children:[Object(r.jsx)("img",{src:e?URL.createObjectURL(e):"http://localhost:5000/images/"+p.profilePic,alt:""}),Object(r.jsx)("label",{htmlFor:"fileInput",children:Object(r.jsx)("i",{className:"settingsPPIcon far fa-user-circle"})}),Object(r.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:e=>t(e.target.files[0])})]}),Object(r.jsx)("label",{children:"Username"}),Object(r.jsx)("input",{type:"text",placeholder:p.username,onChange:e=>c(e.target.value)}),Object(r.jsx)("label",{children:"Email"}),Object(r.jsx)("input",{type:"email",placeholder:p.email,onChange:e=>i(e.target.value)}),Object(r.jsx)("label",{children:"Password"}),Object(r.jsx)("input",{type:"password",onChange:e=>o(e.target.value)}),Object(r.jsx)("button",{className:"settingsSubmit",type:"submit",children:"Update"}),j&&Object(r.jsx)("span",{style:{color:"green",textAlign:"center",marginTop:"20px"},children:"Profile has been updated..."})]})]}),Object(r.jsx)(u,{})]})}s(52);function w(){const e=Object(a.useRef)(),t=Object(a.useRef)(),{dispatch:s,isFetching:c}=Object(a.useContext)(x);return Object(r.jsxs)("div",{className:"login",children:[Object(r.jsx)("span",{className:"loginTitle",children:"Login"}),Object(r.jsxs)("form",{className:"loginForm",onSubmit:async a=>{a.preventDefault(),s({type:"LOGIN_START"});try{const a=await d.a.post("/auth/login",{username:e.current.value,password:t.current.value});s({type:"LOGIN_SUCCESS",payload:a.data})}catch(c){s({type:"LOGIN_FAILURE"})}},children:[Object(r.jsx)("label",{children:"Username"}),Object(r.jsx)("input",{type:"text",className:"loginInput",placeholder:"Enter your username...",ref:e}),Object(r.jsx)("label",{children:"Password"}),Object(r.jsx)("input",{type:"password",className:"loginInput",placeholder:"Enter your password...",ref:t}),Object(r.jsx)("button",{className:"loginButton",type:"submit",disabled:c,children:"Login"})]}),Object(r.jsx)("button",{className:"loginRegisterButton",children:Object(r.jsx)(o.b,{className:"link",to:"/register",children:"Register"})})]})}s(53);function S(){const[e,t]=Object(a.useState)(""),[s,c]=Object(a.useState)(""),[n,i]=Object(a.useState)(""),[l,j]=Object(a.useState)(!1);return Object(r.jsxs)("div",{className:"register",children:[Object(r.jsx)("span",{className:"registerTitle",children:"Register"}),Object(r.jsxs)("form",{className:"registerForm",onSubmit:async t=>{t.preventDefault(),j(!1);try{(await d.a.post("/auth/register",{username:e,email:s,password:n})).data&&window.location.replace("/login")}catch(a){j(!0)}},children:[Object(r.jsx)("label",{children:"Username"}),Object(r.jsx)("input",{type:"text",className:"registerInput",placeholder:"Enter your username...",onChange:e=>t(e.target.value)}),Object(r.jsx)("label",{children:"Email"}),Object(r.jsx)("input",{type:"text",className:"registerInput",placeholder:"Enter your email...",onChange:e=>c(e.target.value)}),Object(r.jsx)("label",{children:"Password"}),Object(r.jsx)("input",{type:"password",className:"registerInput",placeholder:"Enter your password...",onChange:e=>i(e.target.value)}),Object(r.jsx)("button",{className:"registerButton",type:"submit",children:"Register"})]}),Object(r.jsx)("button",{className:"registerLoginButton",children:Object(r.jsx)(o.b,{className:"link",to:"/login",children:"Login"})}),l&&Object(r.jsx)("span",{style:{color:"red",marginTop:"10px"},children:"Something went wrong!"})]})}var T=function(){const{user:e}=Object(a.useContext)(x);return Object(r.jsxs)(o.a,{children:[Object(r.jsx)(N,{}),Object(r.jsxs)(p.c,{children:[Object(r.jsx)(p.a,{exact:!0,path:"/",children:Object(r.jsx)(O,{})}),Object(r.jsx)(p.a,{path:"/register",children:e?Object(r.jsx)(O,{}):Object(r.jsx)(S,{})}),Object(r.jsx)(p.a,{path:"/login",children:e?Object(r.jsx)(O,{}):Object(r.jsx)(w,{})}),Object(r.jsx)(p.a,{path:"/write",children:e?Object(r.jsx)(I,{}):Object(r.jsx)(S,{})}),Object(r.jsx)(p.a,{path:"/settings",children:e?Object(r.jsx)(v,{}):Object(r.jsx)(S,{})}),Object(r.jsx)(p.a,{path:"/post/:postId",children:Object(r.jsx)(y,{})})]})]})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(g,{children:Object(r.jsx)(T,{})})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.2a23f692.chunk.js.map